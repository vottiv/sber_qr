# Плати QR от Сбера для Битрикса
## Подготовительная часть
1. Добавляем новое свойство для заказа.
```
Название: "Внешний ID заказа в Сбере"
Код: "ORDER_ID_SBER"
Тип: "Строка"
```
2. Добавляем новую платежную систему "Плати QR от Сбера"
## Пошаговое описание
1. В шаблонах заказа (список/деталка) выводим ссылку на раздел, куда положим наш компонент с генерирующий QR код 

>В моём примере это /account/orders-history/sberqr.php?ID=[ID_заказа]

2. Для полноценной работы компонента необходимо установить библиотеку для генерации QR. Можете использовать любую из множества существующих, у меня же взята за основу PHP QR Code. Ознакомьтесь с [этой инструкцией](https://snipp.ru/php/qr-code) и конфигурируйте ваш QR, как вздумается
3. Шаблон для страницы с кодом отсуствует, придумайте сами, как будет выглядеть сама страница. В качестве примера, приложу скрин своей реализации
![QR код](/local/assets/images/sber_qr.jpg "Пример вывода QR на отдельной странице")
4. После того, как шаблон для вывода будет готов - без разницы где вы разместите сам код, будь то отдельная страница, попап или детальная заказа - отсканируйте код. 
5. После сканирования вас перекинет в мобильное приложение Сбербанка, в нём необходимо провести оплату
В приложении будет указан номер заказа и сумма заказа для оплаты
![Мобильное приложение](/local/assets/images/pay_qr.jpg "Результат сканирования QR кода")
6. Для того, чтобы для заказа зафиксировалась оплата необходимо обновить страницу с кодом или перейти на детальную страницу заказа
7. При успешном сценарии у заказа проставится оплата